---
template: post
title: HÃ£y nÃ³i vá» Referrer-Policy - Báº¡n cÃ³ Ä‘ang bá»‹ dÃ²m ngÃ³ khi duyá»‡t web khÃ´ng?
slug: referrer-policy
draft: false
created: '2021-05-27T17:24:44.755Z'
description: TÃ¬m hiá»ƒu vá» Referrer-Policy vÃ  cÃ¡ch nÃ³ báº£o vá»‡ báº¡n khi truy cáº­p internet
category: 'Blog'
tags:
  - referer
  - referrer-policy
  - internet tracking
  - http header
---

### Dáº«n nháº­p

NhÆ° chÃºng ta Ä‘Ã£ biáº¿t HTTP Header `Referer` thá»ƒ hiá»‡n ráº±ng báº¡n Ä‘áº¿n tá»« Ä‘Ã¢u khi truy cáº­p má»™t trang web. Giáº£ dá»¥ ráº±ng báº¡n Ä‘ang lÆ°á»›t [www.facebook.com](http://www.facebook.com), bá»—ng nhÃ¬n tháº¥y má»™t chiáº¿c link Ä‘áº¿n cá»­a hÃ ng bÃ¡n chiáº¿c Ã¡o Ä‘ang sale. Báº¡n click vÃ o Ä‘Ã³ Ä‘á»ƒ xem chiáº¿c Ã¡o vÃ¬ tÃ² mÃ², cÃ³ thá»ƒ báº¡n cÅ©ng sáº½ mua chiáº¿c Ã¡o Ä‘Ã³. Má»™t Ä‘iá»u khÃ´ng báº¥t ngá» láº¯m Ä‘Ã³ lÃ  ngay thá»i Ä‘iá»ƒm báº¡n click vÃ o chiáº¿c link, cá»­a hÃ ng quáº§n Ã¡o kia sáº½ biáº¿t Ä‘Æ°á»£c báº¡n Ä‘áº¿n vá»›i trang web cá»§a há» tá»« facebook. HÆ¡n ná»¯a, há» cÃ³ thá»ƒ Ä‘ong Ä‘áº¿m Ä‘Æ°á»£c tá»‰ lá»‡ sá»‘ ngÆ°á»i mua hÃ ng Ä‘áº¿n tá»« facebook so vá»›i cÃ¡c kÃªnh marketing khÃ¡c lÃ  bao nhiÃªu. Tá»« Ä‘Ã³ cÃ³ thá»ƒ cÃ³ nhá»¯ng sá»± Ä‘iá»u chá»‰nh phÃ¹ há»£p cho chiáº¿n dá»‹ch quáº£ng cÃ¡o. CÃ¡ch hoáº¡t Ä‘á»™ng thÃ¬ tÆ°Æ¡ng Ä‘á»‘i Ä‘Æ¡n giáº£n, má»—i khi ngÆ°á»i dÃ¹ng áº¥n vÃ o má»™t Ä‘Æ°á»ng link, má»™t header `referer` sáº½ Ä‘Æ°á»£c Ä‘Ã­nh kÃ¨m.

![clothes](https://images.unsplash.com/photo-1489987707025-afc232f7ea0f?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=2100&q=80 'LÆ°á»›t web tháº¥y Ã¡o Ä‘áº¹p')

HÃ¬nh dÆ°á»›i Ä‘Ã¢y mÃ´ táº£ viá»‡c referer Ä‘Æ°á»£c gá»­i Ä‘i khi báº¡n Ä‘á»c bÃ¡o [dantri.com.vn](http://dantri.com.vn)

![](/media/referer-dantri.jpg)

Tuy nhiÃªn, hÃ£y xem xÃ©t Ä‘áº¿n má»™t vÃ­ dá»¥ khÃ¡c, Ä‘Ã³ lÃ  Google Docs. NhÆ° chÃºng ta váº«n hay sá»­ dá»¥ng Google Docs Ä‘á»ƒ chia sáº» tÃ i liá»‡u vá»›i nhau. ÄÆ¡n giáº£n nháº¥t Ä‘Ã³ lÃ  qua hai bÆ°á»›c:

1. Share quyá»n cá»§a vÄƒn báº£n Ä‘Ã³ lÃ  "Anyone with link can view/edit"
2. Gá»­i link cho ngÆ°á»i khÃ¡c

Má»—i link cá»§a má»™t vÄƒn báº£n Ä‘á»u cÃ³ dáº¡ng [https://docs.google.com/document/d/**some-random-id**/edit](https://docs.google.com/document/d/some-random-id/edit). Vá» cÆ¡ báº£n `some-random-id` Ä‘á»§ phá»©c táº¡p Ä‘á»ƒ khÃ´ng ai cÃ³ thá»ƒ tá»± mÃ² ra Ä‘Æ°á»£c, ngoáº¡i trá»« viá»‡c Ä‘Æ°á»£c chia sáº». Cho nÃªn vá» cÆ¡ báº£n viá»‡c chia sáº» link cho nhau lÃ  tÆ°Æ¡ng Ä‘á»‘i an toÃ n.

Láº¥y vÃ­ dá»¥ vá»›i vÄƒn báº£n [https://docs.google.com/document/d/1QHmwfKoekal9HJDu-\_3zol5Ht2TGtfiSumHWVD9LRgo/edit](https://docs.google.com/document/d/1QHmwfKoekal9HJDu-_3zol5Ht2TGtfiSumHWVD9LRgo/edit). Trong vÄƒn báº£n nÃ y cÃ³ chá»©a Ä‘Æ°á»ng link cá»§a bÃ¡o [DÃ¢n TrÃ­](https://dantri.com.vn/) vÃ  bÃ¡o [VnExpress](https://vnexpress.net/), Ä‘á»“ng thá»i cáº£ thÃ´ng tin tÃ i khoáº£n ngÃ¢n hÃ ng cá»§a mÃ¬nh. Náº¿u báº¡n áº¥n vÃ o Ä‘Æ°á»ng link trong file bÃªn trÃªn, liá»‡u ráº±ng request Ä‘áº¿n bÃ¡o DÃ¢n TrÃ­ vÃ  VnExpress cÃ³ Ä‘Æ°á»£c Ä‘Ã­nh kÃ¨m header dÆ°á»›i Ä‘Ã¢y hay khÃ´ng?

> Referer: https://docs.google.com/document/d/1QHmwfKoekal9HJDu-_3zol5Ht2TGtfiSumHWVD9LRgo/edit

![](/media/screenshot-2021-05-28-at-00.34.05.png)

Náº¿u cÃ¢u tráº£ lá»i lÃ  cÃ³, váº­y nghÄ©a lÃ  ngÆ°á»i quáº£n trá»‹ web cá»§a DÃ¢n TrÃ­ vÃ  VnExpress cÃ³ thá»ƒ biáº¿t Ä‘Æ°á»£c link cá»§a tÃ i liá»‡u cá»§a mÃ¬nh, Ä‘á»“ng nghÄ©a vá»›i viá»‡c há» biáº¿t Ä‘Æ°á»£c thÃ´ng tin tÃ i khoáº£n ngÃ¢n hÃ ng cá»§a mÃ¬nh, náº¿u mÃ¬nh láº¡i chia sáº» tÃ i liá»‡u nÃ y vá»›i quyá»n **_Anyone with link can edit_**, thÃ¬ má»i chuyá»‡n cÃ²n tá»‡ hÆ¡n, ngÆ°á»i Ä‘Ã³ cÃ³ thá»ƒ Ä‘á»•i máº­t kháº©u trong tÃ i liá»‡u nÃ y khiáº¿n mÃ¬nh láº§n tá»›i khÃ´ng thá»ƒ Ä‘Äƒng nháº­p Ä‘Æ°á»£c.

Nghe cÃ³ váº» báº¥t ngá», báº¡n cÃ³ chá»™t dáº¡ ráº±ng mÃ¬nh cÃ³ thá»ƒ bá»‹ lá»™ bao nhiÃªu tÃ i liá»‡u tá»« trÆ°á»›c Ä‘áº¿n nay cÃ³ pháº£i khÃ´ng? Váº­y báº¡n hÃ£y dÃ nh ra 2 phÃºt Ä‘á»ƒ tá»± mÃ¬nh kiá»ƒm chá»©ng nhÃ©.

![](/media/eternity.jpg)

OK. Náº¿u báº¡n Ä‘Ã£ check, thÃ¬ cÃ³ thá»ƒ sáº½ tháº¥y ngáº¡c nhiÃªn vÃ¬ Ä‘Ãºng lÃ  cÃ³ header `Referer` gá»­i Ä‘i khi click vÃ o trang bÃ¡o tháº­t, nhÆ°ng giÃ¡ trá»‹ cá»§a nÃ³ chá»‰ lÃ  <https://www.google.com/> chá»© hoÃ n toÃ n khÃ´ng cÃ³ giÃ¡ trá»‹ cá»§a `some-random-id`.

![](/media/dantri-header.png)

Váº­y nghÄ©a lÃ  báº¡n **váº«n an toÃ n**. NÃ³i cÃ¡ch khÃ¡c, náº¿u báº¡n áº¥n vÃ o má»™t Ä‘Æ°á»ng link trong [Google Docs](https://docs.google.com/), thÃ¬ ngÆ°á»i quáº£n trá»‹ trang web Ä‘Ã³ chá»‰ biáº¿t báº¡n vÃ o trang web cá»§a há» tá»« trang web cá»§a google, chá»© khÃ´ng thá»ƒ biáº¿t chÃ­nh xÃ¡c lÃ  link nÃ o. Váº­y táº¡i sao láº¡i tháº¿?

### Referrer-Policy

Cá»©u tinh cá»§a chÃºng ta chÃ­nh lÃ  **Referrer-Policy**. Trong vÃ­ dá»¥ bÃªn trÃªn, hiá»ƒu nÃ´m na lÃ , google docs khÃ´ng cho phÃ©p gáº¯n link Ä‘áº§y Ä‘á»§ vÃ o header referer, mÃ  nÃ³ chá»‰ gáº¯n duy nháº¥t origin, cÃ³ nghÄ©a lÃ  `some-random-id` khÃ´ng Ä‘Æ°á»£c tiáº¿t lá»™ cho DÃ¢n TrÃ­ vÃ  VnExpress, hay báº¥t cá»© trang web nÃ o khÃ¡c. Váº­y chÃ­nh xÃ¡c Referrer-Policy lÃ  gÃ¬?

> The **Referrer-Policy** [HTTP header](https://developer.mozilla.org/en-US/docs/Glossary/HTTP_header) controls how much [referrer information](https://developer.mozilla.org/en-US/docs/Web/Security/Referer_header:_privacy_and_security_concerns) (sent via the [Referer](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Referer) header) should be included with requests.

Referrer-Policy lÃ  má»™t HTTP Header Ä‘iá»u khiá»ƒn viá»‡c mÃ¬nh gá»­i thÃ´ng tin referrer Ä‘i. Tuá»³ thuá»™c vÃ o nhu cáº§u mÃ¬nh muá»‘n gá»­i Ä‘i báº±ng nÃ o thÃ´ng tin vá» referrer, hay báº£o vá»‡ thÃ´ng tin Ä‘áº¿n má»©c nÃ o mÃ  cÃ³ thá»ƒ lá»±a chá»n rule cho phÃ¹ há»£p. ChÃºng ta hÃ£y cÃ¹ng Ä‘i qua má»™t vÃ i cÃ¡c rule cá»§a Referrer-Policy nhÃ©.

#### Má»™t vÃ i rule cá»§a Referrer-Policy

**unsafe-url:** LuÃ´n gá»­i referrer

**no-referrer:** KhÃ´ng gá»­i referrer

**no-referrer-when-downgrade:** KhÃ´ng gá»­i referrer khi Ä‘iá»ƒm Ä‘áº¿n cÃ³ protocol cÃ³ tÃ­nh cháº¥t báº£o máº­t kÃ©m hÆ¡n (HTTPS => HTTP, HTTPS => files)

**origin:** Chá»‰ gá»­i origin. VÃ­ dá»¥ báº¡n Ä‘ang á»Ÿ <https://example.com/page.html> thÃ¬ khi Ä‘áº¿n má»™t trang khÃ¡c, giÃ¡ trá»‹ cá»§a referrer sáº½ lÃ  <https://example.com/>

**same-origin:** Gá»­i referrer full url khi cÃ¹ng origin, náº¿u khÃ¡c thÃ¬ chá»‰ send origin\
VÃ­ dá»¥: Náº¿u Ä‘ang á»Ÿ <https://example.com/page.html>, sau Ä‘Ã³ sang trang <https://example.com/about.html>, thÃ¬ referrer sáº½ lÃ  <https://example.com/page.html>. \
CÃ²n náº¿u Ä‘ang á»Ÿ <https://example.com/page.html> mÃ  sang <https://google.com>, thÃ¬ referrer sáº½ chá»‰ lÃ  https://example.com/

CÃ¡c rule khÃ¡c cá»§a Referrer-Policy cÃ¡c báº¡n cÃ³ thá»ƒ tham kháº£o chi tiáº¿t táº¡i [Ä‘Ã¢y](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Referrer-Policy#directives)

### Set rule báº±ng HTML

NgoÃ i HTTP Header, chÃºng ta hoÃ n toÃ n cÃ³ thá»ƒ set Referrer-Policy [sá»­ dá»¥ng HTML](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Referrer-Policy#integration_with_html)

```html
<meta name="referrer" content="origin" />
```

### New default

Tá»« thÃ¡ng 11 nÄƒm 2020, giÃ¡ trá»‹ máº·c Ä‘á»‹nh cá»§a Referrer-Policy lÃ  `strict-origin-when-cross-origin` trÃªn nhiá»u trÃ¬nh duyá»‡t (e.g: Chrome 85, Firefox 87,â€¦), mÃ´ táº£ cá»§a nÃ³ nhÆ° sau:

> Send the origin, path, and querystring when performing a same-origin request. For cross-origin requests send the origin (only) when the protocol security level stays same (HTTPSâ†’HTTPS). Don't send the [Referer](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Referer) header to less secure destinations (HTTPSâ†’HTTP).

TrÆ°á»›c Ä‘Ã³ giÃ¡ trá»‹ máº·c Ä‘á»‹nh cá»§a Referrer-Policy lÃ  `no-referrer-when-downgrade` . Sá»± thay Ä‘á»•i nÃ y cÃ³ nghÄ©a lÃ  náº¿u báº¡n click vÃ o má»™t link trÃªn trang web, trÃ¬nh duyá»‡t sáº½ giáº¥u Ä‘i thÃ´ng tin báº¡n Ä‘áº¿n chÃ­nh xÃ¡c tá»« url nÃ o. VÃ­ dá»¥ báº¡n Ä‘ang á»Ÿ [https://docs.google.com/document/d/1QHmwfKoekal9HJDu-\_3zol5Ht2TGtfiSumHWVD9LRgo/edit](https://docs.google.com/document/d/1QHmwfKoekal9HJDu-_3zol5Ht2TGtfiSumHWVD9LRgo/edit) rá»“i áº¥n vÃ o [DÃ¢n TrÃ­](https://dantri.com.vn/). DÃ¢n TrÃ­ chá»‰ biáº¿t ráº±ng báº¡n Ä‘áº¿n tá»« google, chá»© khÃ´ng há» biáº¿t báº¡n Ä‘áº¿n tá»« vÄƒn báº£n cÃ³ chá»©a cáº£ tÃ i khoáº£n ngÃ¢n hÃ ng cá»§a báº¡n. Viá»‡c nÃ y vÃ´ hÃ¬nh trung Ä‘Ã£ Ä‘áº£m báº£o an toÃ n vÃ  tÃ­nh riÃªng tÆ° cá»§a báº¡n hÆ¡n khi sá»­ dá»¥ng internet. NhÆ°ng Ä‘á»‘i vá»›i cÃ¡c báº¡n web developer cÅ©ng nÃªn chÃº Ã½ xem trong há»‡ thá»‘ng cá»§a báº¡n Ä‘ang cÃ³ feature nÃ o dá»±a vÃ o thÃ´ng tin referrer hay khÃ´ng, náº¿u cÃ³ thÃ¬ tá»« Chrome 85, Firefox 87 Ä‘á»• Ä‘i nÃ³ cÃ³ cÃ²n hoáº¡t Ä‘á»™ng Ä‘Ãºng hay khÃ´ng, náº¿u khÃ´ng thÃ¬ hÃ£y lÃªn káº¿ hoáº¡ch chá»‰nh sá»­a cho phÃ¹ há»£p nhÃ©.

### Fun fact:

Header `Referer` [viáº¿t sai chÃ­nh táº£](https://stackoverflow.com/questions/3087626/was-the-misspelling-of-the-http-field-name-referer-intentional), Ä‘Ãºng chÃ­nh táº£ pháº£i lÃ  `Referrer`, nhÆ°ng Ä‘áº¿n khi nhiá»u ngÆ°á»i dÃ¹ng quÃ¡ rá»“i thÃ¬ khÃ´ng ai dÃ¡m sá»­a cáº£. Sá»£ há»ng cáº£ há»‡ thá»‘ng internet vá»‘n Ä‘Ã£ phá»©c táº¡p. ÄÃ¢y lÃ  vÃ­ dá»¥ ráº¥t Ä‘áº·c trÆ°ng cho cÃ¡ch mÃ  toÃ n bá»™ há»‡ thá»‘ng sá»‘ trÃªn toÃ n cáº§u Ä‘Æ°á»£c xÃ¢y dá»±ng vÃ  váº­n hÃ nh ğŸ˜…. VÃ  lÃ  máº£nh Ä‘áº¥t mÃ u má»¡ cho cÃ¡c hacker trÃªn toÃ n tháº¿ giá»›i Ä‘á»ƒ khai thÃ¡c.

### Káº¿t luáº­n

Qua bÃ i viáº¿t nÃ y, chÃºng ta cÃ³ thá»ƒ há»c Ä‘Æ°á»£c vÃ i Ä‘iá»u:

- Hiá»ƒu Ä‘Æ°á»£c Referrer-Policy lÃ  gÃ¬?
- KhÃ´ng nÃªn lÆ°u máº­t kháº©u vÃ o google docs, Note,â€¦ ğŸ˜‚
- Náº¿u tÃ i liá»‡u cÃ³ thÃ´ng tin nháº¡y cáº£m nÃªn háº¡n cháº¿ share kiá»ƒu **Anyone with link can view/edit**
- Náº¿u lÃ m sai cÃ¡i gÃ¬ nÃªn sá»­a cÃ ng sá»›m cÃ ng tá»‘t, Ä‘á»«ng Ä‘á»ƒ Ä‘áº¿n khi nÃ³ gÃ¢y áº£nh hÆ°á»Ÿng lá»›n quÃ¡ khÃ´ng ai dÃ¡m sá»­a ğŸ™ˆ

ChÃºc cÃ¡c báº¡n khoáº» máº¡nh an toÃ n qua mÃ¹a dá»‹ch bá»‡nh vÃ  cÃ¹ng nhau há»c há»i Ä‘á»ƒ tiáº¿n bá»™ má»—i ngÃ y nhÃ©.
